<Window x:Class="Clash_WPF.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="Clash WPF" Height="680" Width="1060" MinHeight="500" MinWidth="800"
        WindowStyle="None" Background="{DynamicResource WindowBgBrush}"
        WindowStartupLocation="CenterScreen"
        Icon="/Clash.ico">

    <WindowChrome.WindowChrome>
        <WindowChrome CaptionHeight="40" ResizeBorderThickness="6"
                      GlassFrameThickness="0" UseAeroCaptionButtons="False" CornerRadius="0"/>
    </WindowChrome.WindowChrome>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="40"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- ═══ Custom Title Bar ═══ -->
        <Grid Grid.Row="0" Background="#0d1117">
            <StackPanel Orientation="Horizontal" Margin="16,0" VerticalAlignment="Center">
                <TextBlock Text="&#xE774;" FontFamily="Segoe MDL2 Assets" FontSize="16"
                           Foreground="{DynamicResource PrimaryBrush}" VerticalAlignment="Center" Margin="0,0,10,0"/>
                <TextBlock Text="Clash WPF" FontSize="13" FontWeight="SemiBold"
                           Foreground="{DynamicResource TextPrimaryBrush}" VerticalAlignment="Center"/>
                <TextBlock Text="{Binding CoreVersion, StringFormat=' v{0}'}" FontSize="11"
                           Foreground="{DynamicResource TextSecondaryBrush}" VerticalAlignment="Center" Margin="4,0,0,0"/>
            </StackPanel>

            <!-- Title bar buttons -->
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right"
                        WindowChrome.IsHitTestVisibleInChrome="True">
                <Button Content="&#xE949;" FontFamily="Segoe MDL2 Assets"
                        Style="{DynamicResource TitleBarButton}" Click="Minimize_Click"/>
                <Button x:Name="MaximizeBtn" Content="&#xE739;" FontFamily="Segoe MDL2 Assets"
                        Style="{DynamicResource TitleBarButton}" Click="Maximize_Click"/>
                <Button Content="&#xE106;" FontFamily="Segoe MDL2 Assets"
                        Style="{DynamicResource CloseButton}" Click="Close_Click"/>
            </StackPanel>
        </Grid>

        <!-- ═══ Main Content ═══ -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="200"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- ═══ Sidebar ═══ -->
            <Border Grid.Column="0" Background="{DynamicResource SidebarBgBrush}">
                <DockPanel>
                    <!-- Bottom: Settings -->
                    <RadioButton DockPanel.Dock="Bottom" Content="设置" GroupName="Nav"
                                 Tag="&#xE713;" Style="{DynamicResource NavButton}"
                                 VerticalAlignment="Bottom" Margin="0,0,0,8"
                                 Command="{Binding NavigateCommand}" CommandParameter="Settings"/>

                    <!-- Top: Navigation items -->
                    <StackPanel DockPanel.Dock="Top" Margin="0,8,0,0">
                        <RadioButton Content="概览" GroupName="Nav" IsChecked="True"
                                     Tag="&#xE80F;" Style="{DynamicResource NavButton}"
                                     Command="{Binding NavigateCommand}" CommandParameter="Overview"/>
                        <RadioButton Content="代理" GroupName="Nav"
                                     Tag="&#xE774;" Style="{DynamicResource NavButton}"
                                     Command="{Binding NavigateCommand}" CommandParameter="Proxies"/>
                        <RadioButton Content="订阅" GroupName="Nav"
                                     Tag="&#xE8A5;" Style="{DynamicResource NavButton}"
                                     Command="{Binding NavigateCommand}" CommandParameter="Profiles"/>
                        <RadioButton Content="连接" GroupName="Nav"
                                     Tag="&#xE71B;" Style="{DynamicResource NavButton}"
                                     Command="{Binding NavigateCommand}" CommandParameter="Connections"/>
                        <RadioButton Content="规则" GroupName="Nav"
                                     Tag="&#xE83D;" Style="{DynamicResource NavButton}"
                                     Command="{Binding NavigateCommand}" CommandParameter="Rules"/>
                        <RadioButton Content="日志" GroupName="Nav"
                                     Tag="&#xE8FD;" Style="{DynamicResource NavButton}"
                                     Command="{Binding NavigateCommand}" CommandParameter="Logs"/>
                    </StackPanel>
                </DockPanel>
            </Border>

            <!-- ═══ Page Content ═══ -->
            <ContentControl Grid.Column="1" Content="{Binding CurrentPage}" Margin="20,16"/>
        </Grid>
    </Grid>
</Window>
